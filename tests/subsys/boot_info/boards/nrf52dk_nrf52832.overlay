/*
 * Copyright (c) 2023 Laczen
 * SPDX-License-Identifier: Apache-2.0
 */

#include <common/mem.h>

/ {
	sram_2000FFE0: sram@2000FFE0 {
		compatible = "zephyr,memory-region", "mmio-sram";
		reg = <0x2000FFE0 0x20>;
                zephyr,memory-region = "FlashSim";
                status = "okay";
        };

        soc {
                sim_flash_controller: sim-flash-controller@0 {
	                compatible = "zephyr,sim-flash";
                        reg = <0x0 0x1>;

			#address-cells = <1>;
		        #size-cells = <1>;
		        erase-value = <0xff>;
                        memory-region = <&sram_2000FFE0>;

			flash_sim0: flash_sim@0 {
			        status = "okay";
			        compatible = "soc-nv-flash";
			        erase-block-size = <0x20>;
			        write-block-size = <1>;
			        reg = <0x00000000 0x20>;

                                partitions {
		                        compatible = "fixed-partitions";
		                        #address-cells = <1>;
		                        #size-cells = <1>;

		                        bi_partition: partition@0 {
			                        label = "bootinfo";
			                        reg = <0x00000000 0x20>;
		                        };
	                        };
                        };
                };
        };

        boot_info: boot_info {
                compatible = "zephyr,boot-info-flash";
                backend = <&bi_partition>;
                size = <0x32>;
        };

        aliases {
                bi = &boot_info;
        };
};

&sram0 {
	reg = <0x20000000 0xFFE0>;
};
